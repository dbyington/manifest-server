{"version":3,"sources":["components/Footer.js","components/Header.js","components/History.js","components/RequestForm.js","components/Show.js","components/Current.js","components/Panel.js","components/App.js","reportWebVitals.js","index.js"],"names":["Footer","className","href","Header","History","props","manifests","manifestItems","length","map","el","i","onClick","m","showManifest","title","hashType","manifestList","RequestForm","makeRequest","data","a","console","log","pkgUrl","startsWith","alert","endsWith","name","onSubmit","component","type","placeholder","value","Show","manifest","JSON","stringify","parse","atob","asEncodedJson","Current","_","require","Panel","key","useState","localCache","window","localStorage","getItem","setManifests","setManifest","useEffect","setItem","getManifest","serverAddr","origin","url","URL","params","pkgurl","hashtype","search","URLSearchParams","toString","fetch","method","headers","then","res","json","haveManifest","man","some","id","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.eefaab4c.chunk.js","sourcesContent":["import './Footer.css'\n\nfunction Footer() {\n  const altText = `By clicking 'Submit' on this form you agree that your intention in using this form, the \n  underlying code, systems, and data produced is not malicious. \n  You also agree that if you are found to be using this form, the underlying code, systems, and data produced \n  in any malicious or harmful way you will pay the sum of one thousand dollars to the copywrite owner.`;\n\n  return (\n    <div className=\"Footer\">\n      <a href={'https://github.com/dbyington/manifest-server'}>Manifest Builder</a> &copy; 2021 Don Byington don!dbyington.com\n      <p><small>{altText}</small></p>\n    </div>\n  );\n}\n\nexport default Footer;\n","import './Header.css';\n\nfunction Header() {\n  return (\n    <div className=\"Header\">\n      <h1>Manifest-O-Matic: The Manifest Builder</h1>\n    </div>\n  );\n}\n\nexport default Header;\n","import './History.css';\n\nfunction History(props) {\n  const manifests = props.manifests;\n  const showManifest = (m) => props.showManifest(m);\n\n  let manifestItems = '';\n\n  if (manifests.length > 0) {\n    manifestItems = manifests.map((el, i) => {\n      return (\n        <li onClick={()=>showManifest(el)} key={i}>{el.title}({el.hashType})</li>\n      );\n    })\n  }\n\n  const manifestList = <ul>{manifestItems}</ul>\n\n  return (\n    <div className=\"History\">\n      <h3>Cached Manifests</h3>\n      {manifestList}\n    </div>\n  );\n}\n\nexport default History;\n","import { Form, FormField } from 'react-hooks-form'\n\nimport './Form.css';\n\n\nexport default function RequestForm(props) {\n  const { makeRequest } = props;\n\n  async function handleSubmit(data) {\n    console.log(data);\n    if (!data.pkgUrl.startsWith(\"https\")) {\n      alert('Package URL must begin with \"https://\"')\n      return;\n    }\n    if (!data.pkgUrl.endsWith(\".pkg\")) {\n      alert('Expected package to end with \".pkg\"')\n      return;\n    }\n    if (!data.hashType) {\n      alert('Please select a hash type')\n      return\n    }\n\n    await makeRequest(data)\n  }\n\n  return (\n    <Form className=\"Form\" name=\"requestForm\" onSubmit={handleSubmit}>\n      <FormField component=\"input\" type=\"text\"  className=\"pkgUrl\" name=\"pkgUrl\" placeholder=\"https url to pkg file\" />\n      <FormField component=\"input\" type=\"radio\" name=\"hashType\" value=\"md5\" />md5\n      <FormField component=\"input\" type=\"radio\" name=\"hashType\" value=\"sha256\" />sha256\n      <input type=\"submit\" name=\"submit\" />\n    </Form>\n  );\n}\n","import './Show.css';\n\nfunction Show(props) {\n  const manifest = props.manifest ? <div><h1>Built Manifest</h1>\n    <pre>{JSON.stringify(JSON.parse(atob(props.manifest.asEncodedJson)), null, \"    \")},</pre></div> : '';\n\n  return (\n    <div className=\"Show\">\n      {manifest}\n    </div>\n  );\n}\n\nexport default Show;\n\n\n","import RequestForm from \"./RequestForm\";\nimport Show from \"./Show\";\n\nimport './Current.css';\n\nfunction Current(props) {\n  return (\n    <div className=\"Current\">\n      <p>To generate manifest data enter the URL, beginning with <q>https://</q>, below then select the hash type and click Submit.</p>\n      <RequestForm makeRequest={props.makeRequest}/>\n      <Show manifest={props.manifest}/>\n    </div>\n  );\n}\n\nexport default Current;\n\n","import { useState, useEffect } from 'react';\n\nimport './Panel.css';\nimport History from \"./History\";\nimport Current from \"./Current\";\n\nconst _ = require('lodash')\n\nexport default function Panel() {\n  const key = 'manifests'\n  const [manifests, setManifests] = useState(() => {\n    const localCache = window.localStorage.getItem(key);\n    return localCache !== null ? JSON.parse(localCache) : [];\n  });\n\n  const [manifest, setManifest] = useState(null);\n\n  // Load items from local storage.\n  useEffect(() => {\n    if (manifests.length > 0) window.localStorage.setItem(key, JSON.stringify(manifests));\n  }, [key, manifests]);\n\n  const showManifest = (m) => setManifest(m)\n\n  // Used to retrieve manifest from the server.\n  const getManifest = async (data) => {\n    console.log(`GET ${data.pkgUrl} with hash type of ${data.hashType}`)\n\n    // Used for local testing\n    // const serverAddr = 'http://localhost:8080/manifest'\n\n    // Used for production build\n    const serverAddr = window.origin + \"/manifest\"\n\n    const url = new URL(serverAddr)\n    const params = {\n      pkgurl: data.pkgUrl,\n      hashtype: data.hashType,\n    }\n    url.search = new URLSearchParams(params).toString();\n    console.log(`Make Request: ${url.toString()}`)\n    fetch(url.toString(), {\n      method: 'GET',\n      headers: {\"accept\": \"application/json\", 'content-type': 'plain/text'}\n    }).then((res) => {\n      return res.json()\n    }).then(res => {\n      console.log('RESPONSE', res)\n      setManifest(res)\n      if (!haveManifest(res)) setManifests([res, ...manifests])\n    })\n  }\n\n  const haveManifest = (man) => {\n    return _.some(manifests, m => m.id === man.id)\n  }\n\n  return (\n    <div className=\"Panel\">\n      <Current manifest={manifest} makeRequest={getManifest}/>\n      <History manifests={manifests} showManifest={showManifest}/>\n    </div>\n  );\n}\n","import Footer from \"./Footer\";\nimport Header from './Header';\nimport Panel from \"./Panel\";\n\nimport './App.css';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <Header />\n      <Panel />\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}