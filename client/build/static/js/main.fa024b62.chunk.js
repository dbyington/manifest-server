(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(63),i=n.n(r),c=(n(69),n(70),n(0));var o=function(){return Object(c.jsxs)("div",{className:"Footer",children:[Object(c.jsx)("a",{href:"https://github.com/dbyington/manifest-server",children:"Manifest Builder"})," \xa9 2021 Don Byington don!dbyington.com",Object(c.jsx)("p",{children:Object(c.jsx)("small",{children:"By clicking 'Submit' on this form you agree that your intention in using this form, the \n  underlying code, systems, and data produced is not malicious. \n  You also agree that if you are found to be using this form, the underlying code, systems, and data produced \n  in any malicious or harmful way you will pay the sum of one thousand dollars to the copywrite owner."})})]})};n(72);var u=function(){return Object(c.jsx)("div",{className:"Header",children:Object(c.jsx)("h1",{children:"Manifest-O-Matic: The Manifest Builder"})})},l=n(7),h=n.n(l),d=n(64),j=n(21),f=n(22);n(74),n(75);var p=function(e){var t=e.manifests,n="";t.length>0&&(n=t.map((function(t,n){return Object(c.jsxs)("li",{onClick:function(){return n=t,e.showManifest(n);var n},children:[t.title,"(",t.hashType,")"]},n)})));var a=Object(c.jsx)("ul",{children:n});return Object(c.jsxs)("div",{className:"History",children:[Object(c.jsx)("h3",{children:"Cached Manifests"}),a]})},m=n(11);n(173);function b(e){var t=e.makeRequest;function n(){return(n=Object(j.a)(h.a.mark((function e(n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(n),n.pkgUrl.startsWith("https")){e.next=4;break}return alert('Package URL must begin with "https://"'),e.abrupt("return");case 4:if(n.pkgUrl.endsWith(".pkg")){e.next=7;break}return alert('Expected package to end with ".pkg"'),e.abrupt("return");case 7:if(n.hashType){e.next=10;break}return alert("Please select a hash type"),e.abrupt("return");case 10:return e.next=12,t(n);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(c.jsxs)(m.Form,{className:"Form",name:"requestForm",onSubmit:function(e){return n.apply(this,arguments)},children:[Object(c.jsx)(m.FormField,{component:"input",type:"text",className:"pkgUrl",name:"pkgUrl",placeholder:"https url to pkg file"}),Object(c.jsx)(m.FormField,{component:"input",type:"radio",name:"hashType",value:"md5"}),"md5",Object(c.jsx)(m.FormField,{component:"input",type:"radio",name:"hashType",value:"sha256"}),"sha256",Object(c.jsx)("input",{type:"submit",name:"submit"})]})}n(174);var g=function(e){var t;return e.manifest&&e.manifest.id&&(t=Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Built Manifest"}),Object(c.jsxs)("pre",{children:[JSON.stringify(JSON.parse(atob(e.manifest.asEncodedJson)),null,"    "),","]})]})),e.loading?Object(c.jsx)("div",{className:"Show",children:Object(c.jsx)("h2",{children:"Reading package.... this could take a minute or so... maybe get some coffee, go for a run... :-)"})}):Object(c.jsx)("div",{className:"Show",children:t})};n(175);var O=function(e){return Object(c.jsxs)("div",{className:"Current",children:[Object(c.jsxs)("p",{children:["To generate manifest data enter the URL, beginning with ",Object(c.jsx)("q",{children:"https://"}),", below then select the hash type and click Submit."]}),Object(c.jsx)(b,{makeRequest:e.makeRequest}),Object(c.jsx)(g,{manifest:e.manifest,loading:e.loading})]})},x=n(176),y=window.origin+"/manifest";function v(){var e="manifests",t=Object(a.useState)((function(){var t=window.localStorage.getItem(e);return null!==t?JSON.parse(t):[]})),n=Object(f.a)(t,2),s=n[0],r=n[1],i=Object(a.useState)(null),o=Object(f.a)(i,2),u=o[0],l=o[1],m=Object(a.useState)(!1),b=Object(f.a)(m,2),g=b[0],v=b[1];Object(a.useEffect)((function(){s.length>0&&window.localStorage.setItem(e,JSON.stringify(s))}),[e,s]);var k=function(){var e=Object(j.a)(h.a.mark((function e(t){var n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(!0),l({}),console.log("GET ".concat(t.pkgUrl," with hash type of ").concat(t.hashType)),n=new URL(y),a={pkgurl:t.pkgUrl,hashtype:t.hashType},n.search=new URLSearchParams(a).toString(),console.log("Make Request: ".concat(n.toString())),fetch(n.toString(),{method:"GET",headers:{accept:"application/json","content-type":"plain/text"}}).then((function(e){return e.json()})).then((function(e){console.log("RESPONSE",e),l(e),w(e)||r([e].concat(Object(d.a)(s))),v(!1)}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(e){return x.some(s,(function(t){return t.id===e.id}))};return Object(c.jsxs)("div",{className:"Panel",children:[Object(c.jsx)(O,{manifest:u,loading:g,makeRequest:k}),Object(c.jsx)(p,{manifests:s,showManifest:function(e){return l(e)}})]})}n(177);var k=function(){return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(u,{}),Object(c.jsx)(v,{}),Object(c.jsx)(o,{})]})},w=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,179)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(k,{})}),document.getElementById("root")),w()},69:function(e,t,n){},70:function(e,t,n){},72:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){}},[[178,1,2]]]);
//# sourceMappingURL=main.fa024b62.chunk.js.map